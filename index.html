<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4f46e5">
    <meta name="description" content="15日間で面接準備を完了させる体系的なプログラム">
    <title>面接対策 15日間プログラム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #334155;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            width: 100%;
            display: flex;
            gap: 20px;
        }

        .card {
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 20px;
            width: 100%;
        }

        aside {
            position: sticky;
            top: 20px;
            height: fit-content;
            width: 250px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        aside ul li {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: background-color 0.2s, color 0.2s;
            color: #334155;
            font-size: 0.9rem;
        }

        aside ul li:hover {
            background-color: #e0e7ff;
        }
        
        aside ul li.active-day {
            background-color: #c7d2fe;
            font-weight: 600;
        }

        .nav-tab {
            padding: 12px;
            border-radius: 0.75rem;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s, color 0.2s;
            text-align: center;
        }

        .nav-tab.active {
            background-color: #4f46e5;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-tab:not(.active) {
            background-color: #eef2ff;
            color: #4f46e5;
        }
        
        #category-filter-nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
            padding: 10px;
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .category-button {
            padding: 8px 12px;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: opacity 0.2s, transform 0.2s;
            text-align: center;
        }

        .category-button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .category-button[data-category="core"] {
            background-color: #ef4444;
            color: white;
        }
        .category-button[data-category="key"] {
            background-color: #f97316;
            color: white;
        }
        .category-button[data-category="good"] {
            background-color: #22c55e;
            color: white;
        }

        .example-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .example-card {
            padding: 20px;
            border-radius: 12px;
            border: 2px solid;
        }

        .example-simple {
            background-color: #fef3c7;
            border-color: #f59e0b;
        }

        .example-detailed {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }

        .example-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 12px;
        }

        .example-simple .example-title {
            color: #92400e;
        }

        .example-detailed .example-title {
            color: #1e40af;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                flex-direction: column;
                gap: 10px;
            }
            aside {
                position: static;
                width: 100%;
                order: -1;
            }
            #nav-tabs-container {
                display: flex;
                flex-direction: row;
                gap: 10px;
            }
            .nav-tab {
                flex: 1;
            }
            #category-filter-nav {
                flex-direction: row;
                justify-content: space-around;
                width: 100%;
                padding: 8px;
            }
            .example-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <audio id="intro-audio" src="introduction.mp3"></audio>
    <audio id="main-audio"></audio>

    <div class="container">
        
        <aside>
            <div id="nav-tabs-container" class="bg-white p-3 rounded-xl shadow-lg flex flex-col gap-2">
                <div id="tab-daily" class="nav-tab active">
                    <i class="fas fa-calendar-alt mr-2"></i> 日数スケジュール版
                </div>
                <div id="tab-category" class="nav-tab">
                    <i class="fas fa-layer-group mr-2"></i> 重要度別版
                </div>
            </div>

            <div id="category-filter-nav" class="hidden">
                <div class="category-button" data-category="core">最重要 (Core)</div>
                <div class="category-button" data-category="key">重要 (Key)</div>
                <div class="category-button" data-category="good">準備しておくと良い (Good)</div>
            </div>

            <div id="list-daily-container" class="card p-4">
                <ul id="questions-list-daily" class="space-y-1">
                </ul>
            </div>

            <div id="list-category-container" class="card p-4 hidden">
                <div class="space-y-2">
                    <h3 class="text-lg font-semibold text-red-600">最重要 (Core)</h3>
                    <ul id="questions-list-core" class="space-y-1"></ul>
                </div>
                <div class="space-y-2 mt-4">
                    <h3 class="text-lg font-semibold text-orange-600">重要 (Key)</h3>
                    <ul id="questions-list-key" class="space-y-1"></ul>
                </div>
                <div class="space-y-2 mt-4">
                    <h3 class="text-lg font-semibold text-green-600">準備しておくと良い (Good)</h3>
                    <ul id="questions-list-good" class="space-y-1"></ul>
                </div>
            </div>
        </aside>

        <main class="w-full">
            <header class="card text-center">
                <h1 class="text-3xl font-bold text-indigo-700">面接対策 15日間プログラム</h1>
                <p class="text-gray-500 mt-1">短期間で主要質問への回答を準備し、フィードバックを得よう</p>
                
                <div class="mt-4 flex flex-col items-center">
                    <h2 class="text-xl font-semibold mb-2">
                        音声ガイド(はじめに)
                        <br>
                        <span style="color: blue;">★</span>
                        <span style="color: red;">注意</span>
                        <span style="color: blue;">★各日程の音声ガイドを再生する場合は、この説明音声を</span>
                        <span style="color: red;">stop</span>
                        <span style="color: blue;">してください。★</span>
                    </h2>
                    <div class="flex items-center gap-4">
                        <button id="play-intro" class="bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-full transition duration-150 shadow-md">
                            <i class="fas fa-play"></i>
                        </button>
                        
                        <div id="intro-speed-controls" class="flex gap-1 text-sm bg-gray-100 p-1 rounded-full">
                            <button data-speed="0.8" class="speed-btn py-1 px-3 rounded-full text-gray-600 hover:bg-white transition duration-150">0.8x</button>
                            <button data-speed="1.0" class="speed-btn py-1 px-3 rounded-full bg-white text-indigo-600 font-bold shadow-sm transition duration-150">1.0x</button>
                            <button data-speed="1.2" class="speed-btn py-1 px-3 rounded-full text-gray-600 hover:bg-white transition duration-150">1.2x</button>
                            <button data-speed="1.5" class="speed-btn py-1 px-3 rounded-full text-gray-600 hover:bg-white transition duration-150">1.5x</button>
                        </div>
                    </div>
                </div>
            </header>
            
            <div class="card p-3">
                <h2 class="text-lg font-semibold mb-2">進捗状況</h2>
                <div class="h-2 bg-gray-200 rounded-full">
                    <div id="progress-bar-fill" class="h-2 bg-green-500 rounded-full transition-all duration-500" style="width: 0%;"></div>
                </div>
                <p id="progress-text" class="text-right text-sm text-gray-500 mt-1">0/15 日完了</p>
            </div>

            <div id="content-container">
            </div>
        </main>
    </div>

<script>
const TOTAL_DAYS = 15;

// メモリ内データストア (localStorageの代替)
const appState = {
    answers: {},
    checklist: {},
    evaluations: {}
};

const questionsData = {
    0: {
        title: "はじめに (プログラム紹介)",
        audio_source: "introduction.mp3",
    },
    1: {
        title: "#1日目# 自己紹介をお願いします",
        description: "面接の第一印象を決める重要な質問。簡潔に、しかし熱意が伝わるように話す。",
        points: ["氏名、学歴/職歴、応募職種と一言でのPRを30秒~1分程度にまとめる。", "話す内容は志望動機や自己PRに繋がるよう意識する。", "笑顔でハキハキと話す。"],
        example_simple: "〇〇大学から参りました△△です。学生時代はサークル活動で課題解決に取り組み、チームを牽引しました。本日はよろしくお願いいたします。",
        example_detailed: {
            '自己紹介パターン': "〇〇大学の△△です。学生時代は特に、サークル活動を通じて培った「目標達成に向けた粘り強さ」が強みです。貴社が掲げる「顧客第一」の理念に共感し、この強みをもって貢献したいと考えています。本日は短い時間ですが、よろしくお願いいたします。",
            '職種特化パターン': "〇〇大学から参りました△△です。大学ではデータサイエンスを専攻し、特にPythonを用いた分析スキルに自信があります。貴社のマーケティング部門でのデータドリブンな意思決定に貢献できると考え、志望いたしました。どうぞよろしくお願いいたします。"
        },
        checklist: ["時間内に収まるか確認した", "結論から述べられているか確認した", "入社意欲が伝わるか確認した"],
        prompt_focus: "【自己紹介へのフィードバック依頼】\n[質問: 自己紹介をお願いします]\n\n以下の私の回答に対して、面接官がさらに深掘りしたくなるような「キーワード」が含まれているか、また、回答が簡潔で分かりやすいかについてフィードバックをください。",
        audio_source: "day1_guidance.mp3",
    },
    2: {
        title: "#2日目# 学生時代に最も打ち込んだことは何ですか?",
        description: "通称「ガクチカ」。目標設定、課題、行動、結果を通じて、あなたの行動特性や価値観を問う。",
        points: ["なぜそれを始めたかという動機を明確にする。", "直面した課題や困難を具体的に述べる。", "その課題に対して自分がどのような「行動」をとったかを具体的に説明する。"],
        example_simple: "大学のテニスサークルで部長を務め、部員数の減少という課題に対し、体験会の改善に取り組みました。",
         example_detailed: {
            'アルバイト': [
                '学生時代は、カフェでのアルバイトに最も力を入れました。お客様満足度向上を目指し、常連のお客様にインタビューを行い、新メニュー開発と店舗のSNS運用を提案しました。特にSNSでは、お客様とのコミュニケーションを重視し、新メニューの裏話やスタッフの日常を投稿することで、お店のファンを増やすことに注力しました。結果、半年後には売上が20%増加し、店舗の活気も戻りました。この経験から、顧客の声を真摯に聞き、ニーズに応えることの重要性を学びました。'
            ],
            'サークル活動': [
                '学生時代に最も力を入れたのは、フットサルサークルの運営です。メンバーが練習に参加しないという課題に対し、練習メニューを全員で考える機会を設けることで、一人ひとりの意見を尊重する運営に切り替えました。その結果、練習参加率が向上し、チームの結束力も高まりました。この経験から、チームで目標を達成するためには、メンバー全員を巻き込む力が重要だと学びました.'
            ],
            '学業・研究': [
                '大学の研究に最も打ち込みました。研究テーマは「高齢者の生活習慣病予防」でした。当初は研究方法が分からず苦戦しましたが、教授や先輩に積極的に相談し、関連文献を読み込むことで、独自のデータ収集方法を確立しました。その結果、説得力のある研究成果を出すことができ、学会で発表する機会もいただきました.この経験から、課題解決のために粘り強く考え抜く力と、周囲を頼る素直な姿勢を身につけました.'
            ],
            'ボランティア活動': [
                '学生時代は、地域の子どもたちに勉強を教えるボランティア活動に最も力を入れました。子どもたちの学力向上という目標に向け、一人ひとりの個性や学習進度に合わせて指導計画を立てました。初めは成果が出ず悩むこともありましたが、根気強く向き合うことで、多くの子どもたちが「勉強が楽しい」と言ってくれるようになりました.この経験から、相手の状況に合わせて柔軟に対応する力と、長期的な視点で物事に取り組む姿勢を学びました.'
            ],
            '長期インターン': [
                '学生時代は、ITベンチャーでの長期インターンに最も注力しました。ユーザーの離脱率が高いという課題に対し、A/Bテストを繰り返してUI/UXを改善するプロジェクトに参加しました.データ分析から仮説を立て、改善案を考案し、実装まで担当した結果、離脱率を15%改善することに成功しました.この経験から、仮説検証のサイクルを回すことの重要性と、データに基づいた課題解決能力を培うことができました.'
            ],
            '資格試験': [
                '学生時代は、簿記1級の資格取得に最も打ち込みました。膨大な学習範囲と高い合格率に最初は戸惑いましたが、「毎日3時間の学習時間を確保する」という目標を立て、計画的に学習を進めました.特に苦手分野は、複数のテキストを比較したり、専門の先生に質問したりするなど、粘り強く学習に取り組みました.結果、合格することができ、この経験から、自ら目標を設定し、計画的に努力を継続する力を身につけました.'
            ],
            '留学': [
                '学生時代は、1年間のカナダ留学に最も力を入れました。当初は言語の壁に苦労しましたが、現地の学生との交流イベントに積極的に参加し、自ら話しかけることを意識しました.また、授業外でもグループワークを企画するなど，主体的に行動することで、多くの友人と深い関係を築くことができました.この経験から、多様な価値観を理解する異文化適応力と、困難な状況でも臆することなく行動する主体性を養うことができました.'
            ],
            '趣味・特技': [
                '学生時代は、独学で動画編集に最も打ち込みました。当初は基本的な操作も分からず、試行錯誤の連続でしたが、海外のチュートリアル動画を参考にしたり、編集コミュニティで積極的に質問したりすることで、徐々にスキルを習得していきました.最終的には，趣味で制作した動画が10万回再生を達成し，多くの視聴者からフィードバックをいただくことができました.この経験から、自ら課題を見つけて解決する探求心と、一つのことを突き詰める集中力を身につけました.'
            ]
        },
        checklist: ["具体的な課題を説明できたか", "自分の具体的な行動を説明できたか", "入社後の仕事にどう活かせるか述べたか"],
        prompt_focus: "【ガクチカへのフィードバック依頼】\n[質問: 学生時代に最も打ち込んだことは何ですか?]\n\n以下の私の回答に対して、STAR法(状況・課題・行動・結果)に基づき、論理的な一貫性があるか、また、面接官がその行動から私のどのような強みを読み取れるかについてフィードバックをください。",
        audio_source: "day2_guidance.mp3",
    },
    3: {
        title: "#3日目# あなたの自己PRを教えてください",
        description: "自分の強みをアピールする。質問の内容がDay2と似ていても、こちらは「強み」そのものに焦点を当てる。",
        points: ["企業の求める人物像と自分の強みを一致させる。", "強みの根拠となるエピソードは一つに絞り、深掘りして説明する。", "単なる能力ではなく、仕事でどう活かせるかを具体的に伝える。"],
        example_simple: "私の強みは、目標達成に向けた「粘り強さ」です。困難な状況でも諦めずに目標を達成した経験があります。",
        example_detailed: {
            "実行力パターン (主体性)": "私の強みは、課題に対して率先して動き出し、周囲を巻き込みながら成果を出す「主体性」です。**[状況]** 所属サークルで新しいイベントの立ち上げが提案されましたが、前例がなく誰も手を挙げない状況が続いていました。**[課題]** このままではサークルの活気が失われると感じ、私は率先して動き出すことを決意しました。目標は「サークル史上最大規模のイベントを成功させ、活動への参加意欲を高めること」でした。**[行動]**これをかいぜんするため、次の３点について改善行動をおこんいました。一点目・まず企画の骨子を作成し、メンバー全員に意見を募って改善を重ねました。二点目・予算・会場・広報など、各分野で得意なメンバーを巻き込み、役割分担を明確化しました。三点目・ 会場交渉では、予算超過に対して代替案を3つ用意し、粘り強く交渉を続けました。さらに、週次で進捗を共有し、メンバーのモチベーション維持にも注力しました。**[結果]**その結果、サークル史上最も大規模なイベントを実現し、参加率を前年比**40%向上**させました。さらに、イベント後のメンバーからは「また企画したい」という声が多数上がり、サークル全体の雰囲気が活性化しました。**[企業での活かし方]**貴社においても、新規プロジェクトや課題に対して「誰かがやるだろう」ではなく、自ら一歩を踏み出し、関係部署を巻き込みながら確実に成果につなげる姿勢で貢献したいと考えています ",       
            "オペレーション改善パターン (実行力)": "私の強みは、課題を具体的なアクションに落とし込み、PDCAを回しながら確実に成果につなげる「実行力」です。**[状況]** 飲食店のアルバイトで、ピークタイム時の提供遅延が常態化しており、月に約10件のクレームが発生していました。**[課題]**顧客満足度向上のため、提供スピードの改善が急務でした。私は「提供時間を平均3分短縮する」という具体的な目標を立てました。**[行動]**以下の5つのステップで改善に取り組みました。1. **分析**：各ポジション（ホール・キッチン・レジ）の作業時間を計測し、ボトルネックを特定しました。2. **立案**：調味料の配置変更や、注文とキッチンの連携方法を見直すなど、具体的な改善策を複数作成しました。3. **提案**：改善案を店長に提案するとともに、スタッフ全員で話し合い、一人ひとりの意見を取り入れながら実行計画を固めました。4. **可視化**：毎週、提供時間の短縮状況をグラフで可視化し、全員で共有することで小さな成功を実感できる仕組みを作りました。5. **対話**：当初はスタッフから「面倒」という声もありましたが、一人ひとりと粘り強く対話を重ね、改善の意義を丁寧に説明し続けることで、最終的には全員の協力を得ることができました。**[結果]**3ヶ月後、提供時間を平均**2分短縮**し、クレーム件数は**月2件以下**に減少。店長からは「オペレーション改善のお手本」と評価されました。**[企業での活かし方]**貴社においても、業務効率化やプロセス改善が必要な場面で、この「課題を分析し、具体的なアクションに落とし込み、PDCAを回しながら成果を出す力」を活かし、着実に成果を積み上げたいと考えています",
            "研究スケジュール管理パターン (計画力)": "私の強みは、複雑な目標を分解し、逆算して最適なプロセスを設計する「計画力」です。 **[状況]** 卒業研究において、5種類の実験を並行して進める必要がありましたが、装置の予約や試薬の準備など、複雑な依存関係が絡み合っていました。 **[課題]** 当初の計画では提出期限に3週間不足することが判明し、研究の完成度が危ぶまれる状況でした。限られた時間とリソースの中で、質を落とさずに研究を完成させることが私の課題でした。 **[行動]** 以下の5つのステップで計画を再構築しました。 1. **優先順位付け**：全ての実験を「必須（論文に不可欠）」「優先（質を高める）」「予備（できれば実施）」の3段階に分類しました 2. **逆算スケジューリング**：提出期限から逆算し、各実験の完了条件とデッドラインを明確に設定しました 3. **依存関係の可視化**：実験間の依存関係を図式化し、どの順序で進めれば最も効率的かを分析しました 4. **リソースの動的配分**：実験装置の空き時間を活用して実験順序を入れ替えたり、予想より早く終わった実験の時間を遅れている実験に充てるなど、週次で計画を柔軟に調整しました 5. **進捗の可視化**：ガントチャートで進捗を毎週確認し、遅延の兆候があれば即座に対策を講じました **[結果]** 計画通りに必須実験と優先実験を完了させ、さらに予備実験まで行う余裕が生まれました。予備実験により当初の仮説をさらに補強するデータを追加でき、指導教授からは「例年より完成度が高い」と評価され、学内発表会で優秀賞を受賞しました。 **[企業での活かし方]** 貴社においても、複数のプロジェクトやタスクが同時進行する場面で、この「優先順位を明確にし、限られたリソースを最適配分しながら確実に成果を出す計画力」を活かし、業務を効率的に推進したいと考えています。",
            "Web改善パターン (課題発見力)": "私の強みは、データを基に現状を深く分析し、本質的な課題を見極める「分析力」です。 **[状況]** 長期インターン先のIT企業で、WebサイトのCVR(顧客転換率)が業界平均を大きく下回り、リード獲得に苦戦していました。 **[課題]** 社内では「デザインが古い」「広告費が足りない」など表面的な議論に終始しており、根本原因が特定できていませんでした。私は「データに基づいて真の原因を突き止め、CVRを改善する」ことを目標に設定しました。 **[行動]** 以下の5つのステップで課題の本質を追求しました。 1. **データ収集**：Google Analyticsで過去3ヶ月分、100ページ以上のアクセスデータを収集し、ヒートマップツールでユーザー行動を可視化しました 2. **離脱分析**：離脱率の高い3つのページを特定し、どの段階でユーザーが興味を失っているかを詳細に調査しました 3. **仮説立案**：分析の結果、ターゲット層（中小企業の経営者）が求める「コスト削減」ではなく、「高機能」ばかりアピールしていることがズレの原因だと仮説を立てました 4. **検証と提案**：ターゲット顧客5名にインタビューを実施し、仮説を検証。上司に「顧客ニーズに合わせたLP改善案」を具体的に提案しました 5. **改善実施**：ターゲット層に刺さるコピーライティングへの変更に加え、CTAボタンの配置とデザインも最適化し、A/Bテストで効果を測定しました **[結果]** 改善実施から2ヶ月後、CVRを**1.8倍に向上**させ、月間リード獲得数を**50件から90件に増加**させました。上司からは「データドリブンな課題解決の好例」と評価されました。 **[企業での活かし方]** 貴社においても、売上低迷や業務の非効率など、表面的には見えにくい課題に直面した際、この「データを基に本質を見極め、的確な解決策を導く分析力」を活かし、確実に成果を出したいと考えています。",
            "イベント企画パターン (創造力)": "私の強みは、既存の枠にとらわれず、課題解決のための新しいアイデアを生み出す「企画力」です。 **[状況]** 大学の文化祭実行委員会で、例年同じような展示が続いた結果、マンネリ化が進み、来場者数が3年連続で減少していました。 **[課題]** 「学生だけでなく、地域住民や家族連れにも楽しんでもらえる文化祭」を実現し、来場者数を前年比20%以上増加させることを目標に掲げました。 **[行動]** 以下の5つのステップで新しい企画を実現しました。 1. **課題分析**：過去3年分の来場者アンケートを分析し、「見るだけでつまらない」「子供が楽しめない」という声が多いことを発見しました 2. **発想転換**：従来の「各団体が教室で展示する」受動的な形式から、「キャンパス全体を舞台にした参加型謎解きイベント」という体験型コンテンツへの転換を着想しました 3. **企画立案**：キャンパス内10カ所に謎を設置し、全問正解者には地域商店街の協賛による景品を用意。学生団体の展示も謎解きのヒントとして組み込み、回遊性を高める設計にしました 4. **合意形成**：実行委員会で企画を提案し、当初は反対意見もありましたが、過去データを示しながら粘り強く説得。最終的に全員の賛同を得ました 5. **実行と協力体制構築**：地域商店街や学生団体20組と交渉し、協力体制を構築。当日は100名以上のスタッフを指揮し、イベントを円滑に運営しました **[結果]** 謎解きイベントは大好評で、学生だけでなく家族連れの来場者が大幅に増加。出口アンケートでは30代以上の来場者が前年比**2倍**になり、総来場者数は前年比**40%増**を達成しました。学長からも「画期的な取り組み」と評価されました。 **[企業での活かし方]** 貴社においても、従来のやり方が通用しなくなった場面で、この「固定観念にとらわれず、データに基づいて新しいアプローチを生み出し、関係者を巻き込んで実現する力」を活かし、新しい価値を創造したいと考えています。",
            "チーム内対立解消パターン (傾聴力)": "私の強みは、相手の意見の背景にある真意を汲み取り、対立を解決に導く「調整力」です。 **[状況]** アルバイト先のアパレルショップで、新商品の販促方法について、A派（SNS広告重視）とB派（店頭POP重視）で意見が真っ二つに分かれ、会議が紛糾しました。 **[課題]** このままでは新商品の発売に間に合わず、チームの雰囲気も悪化する一方でした。私は「対立を解消し、全員が納得できる解決策を見つける」ことを目標にしました。 **[行動]** 以下の5つのステップで対立解決に取り組みました。 1. **個別ヒアリング**：対立する両派のメンバー計6名に、それぞれ個別で30分ずつ時間を設け、「なぜその方法が良いと思うのか」という根拠と目的を丁寧に聞きました 2. **真意の把握**：双方とも「新商品を成功させたい」という共通の目的を持っており、アプローチの違いは「得意分野の違い」に過ぎないことを理解しました 3. **共通認識の形成**：全体ミーティングで「全員が同じゴールを目指している」ことを共有し、対立ではなく協力の土台を作りました 4. **折衷案の提案**：「まずSNSで認知を広げ、来店客には店頭POPで購買を促す」という両方の強みを活かした二段階戦略を提案しました 5. **役割分担の明確化**：A派にはSNS運用、B派には店頭演出を担当してもらい、それぞれの強みを最大限に活かせる体制を構築しました **[結果]** チームの協力体制が回復し、両方の施策が相乗効果を生み、新商品の売上が目標の**130%を達成**しました。店長からは「対立を乗り越えて成果を出した好例」と評価され、その後もメンバー同士が自発的に意見交換する風通しの良い雰囲気が定着しました。 **[企業での活かし方]** 貴社においても、部署間の意見対立やプロジェクト内での方針の食い違いが生じた際、この「相手の真意を汲み取り、共通のゴールに向けて合意形成を図る調整力」を活かし、チーム全体で成果を出すことに貢献したいと考えています。",
            "プレゼン資料作成パターン (発信力)": "私の強みは、複雑な情報を相手に合わせて分かりやすく正確に伝える「発信力」です。 **[状況]** ゼミの共同研究で、複雑な統計分析結果を専門外のメンバー5名にも理解してもらう必要がありました。 **[課題]** 当初、専門用語が多く、メンバーからは「難しくてついていけない」という声が上がっていました。このままでは研究の質が低下し、全員で議論を深めることができない状況でした。 **[行動]** 以下の5つのステップで、全員が理解できる説明を追求しました。 1. **現状把握**：メンバー一人ひとりに「どこが分からないか」をヒアリングし、つまずきポイントを特定しました 2. **専門用語の排除**：統計用語を日常言葉に置き換え、「中学生にも理解できるレベル」を目指しました 3. **具体例の活用**：抽象的な概念は、Amazonのレコメンド機能など身近な具体例で説明しました 4. **視覚化**：複雑なデータは図解やグラフで可視化し、直感的に理解できるよう工夫しました 5. **個別フォロー**：各メンバーの理解度を確認しながら、必要に応じて個別に補足説明を行いました **[結果]** メンバー全員が研究内容を深く理解できるようになり、議論時間が従来の週1時間から週2時間に増加。メンバーから積極的に質問や改善提案が出るようになり、多角的な視点が加わったことで研究の質が大きく向上しました。その結果、学内発表では**最優秀賞**を受賞しました。 **[企業での活かし方]** 貴社の営業職においても、この「相手の知識レベルに合わせた説明力」を活かし、IT知識の少ないお客様にも製品の価値を分かりやすく伝えることで、信頼構築と成約率向上に貢献したいと考えています。特に、複雑な技術仕様を「お客様のビジネスにどう役立つか」という視点で説明することで、納得感を高め、長期的な関係構築につなげたいと考えています",
            "ルール順守徹底パターン (規律性)": "私の強みは、チーム全体の目標達成のために協力体制を構築する「調整力」です。 **[状況]** 塾のアルバイトで、各講師が独自の指導スタイルを持っており、講師間の情報共有が不足していました。 **[課題]** その結果、生徒が複数の講師から異なる解法を教わり混乱したり、進捗管理が統一されていないなどの問題が発生していました。 **[行動]** 1. **対話の場づくり**：月1回の講師ミーティングを提案し、各自の工夫や課題を共有する場を作りました 2. **共通フォーマットの作成**：進捗管理シートを作成し、全講師が生徒の状況を把握できるようにしました 3. **相互尊重の文化醸成**：「独自の工夫を否定せず、良い部分を共有しよう」という方針を提案し、お互いの強みを活かし合う雰囲気を作りました **[結果]** 講師間のコミュニケーションが活性化し、生徒の成績向上率が前年比**20%改善**しました。 **[企業での活かし方]** 貴社においても、部署間の連携や情報共有が課題となった際、この「目標に向けてメンバーをまとめる調整力」を活かしたいと考えています。",
            "緊急事態対応パターン (柔軟性)": "私の強みは、予期せぬ変化に冷静に対応し、新しい価値を創造する「適応力」です。 **[状況]** カンボジアでの海外ボランティア活動で、子どもたち30名を対象とした環境教育プログラム（野外での植樹体験）を計画していました。 **[課題]** しかし当日、予期せぬ豪雨により野外活動が全て中止となり、プログラム開始まで残り2時間という状況で代替案を考える必要がありました。参加を楽しみにしていた子どもたちを失望させないことが私の使命でした。 **[行動]** 以下の5つのステップで危機を乗り越えました。 1. **冷静な状況把握**：パニックになりかけたチームメンバー5名を集め、「この状況で何ができるか」を冷静に考えようと呼びかけました 2. **ブレインストーミング**：全員でアイデアを出し合い、「屋内でできる文化交流プログラム」という方向性を導き出しました 3. **即座の役割分担**：日本文化紹介（折り紙、書道）、現地の伝統舞踊体験、簡易的な環境クイズ大会という3つのコンテンツに分け、各自の得意分野で役割分担しました 4. **現地住民との協力**：急遽、現地の方々にも声をかけ、伝統舞踊の指導をお願いするなど、地域を巻き込んだ企画に拡大しました 5. **柔軟な進行**：当日は子どもたちの反応を見ながら、盛り上がったコンテンツの時間を延長するなど、臨機応変に進行を調整しました **[結果]** 当初の環境教育という目的は達成できませんでしたが、予想以上に充実した文化交流が実現し、参加者アンケートでは**満足度92%**を獲得。現地住民も50名以上が参加し、「日本の文化を知る貴重な機会だった」と好評でした。主催団体からは「危機対応の好例」として表彰され、翌年のプログラムにこの交流会が正式に組み込まれました。 **[企業での活かし方]** 貴社においても、市場環境の急変やプロジェクトの予期せぬトラブルに直面した際、この「冷静に状況を分析し、限られたリソースで最善の代替案を創り出す適応力」を活かし、ピンチをチャンスに変える貢献をしたいと考えています。",
            "協力体制構築パターン (働きかけ力)": "私の強みは、目標達成のために周囲の協力を引き出し、Win-Winの関係を築く「働きかけ力」です。 **[状況]** 大学のテニスサークル（部員50名）で、部員間の技術レベルの差が大きく、練習への不満が高まっていました。 **[課題]** 初心者からは「ついていけない」、上級生からは「レベルが低い練習は時間の無駄」という声が上がり、練習の出席率が60%まで低下。このままでは活動が停滞すると危機感を抱きました。私は副部長として「全員が満足できる練習環境を作り、サークルを活性化させる」ことを目標に掲げました。 **[行動]** 以下の5つのステップで、メンバーの協力を引き出しました。 1. **個別ヒアリング**：上級生10名、初心者15名に個別でヒアリングを実施し、それぞれの本音と希望を丁寧に聞き取りました 2. **Win-Winの提案設計**：上級生には「指導役としてのやりがい」と「リーダーシップ経験は就活でも活きる」、初心者には「個別指導による着実な成長機会」というメリットを明確にしました 3. **粘り強い説得**：当初、上級生からは「指導は面倒」という抵抗もありましたが、個別に対話を重ね、「後輩の成長を見る喜び」を共有することで、徐々に賛同を得ました 4. **仕組みの構築**：上級生3名が初心者10名を担当する「メンター制度」を導入し、レベル別の練習メニューを設計。週1回のメンター会議で情報共有も行いました 5. **継続的なフォロー**：月1回、全員でアンケートを実施し、改善点を反映。メンバーの声を大切にする姿勢を示し続けました **[結果]** 練習の出席率が**60%から88%に向上**し、メンバー全員が主体的に参加する体制が整いました。初心者の技術向上が目に見えて進み、上級生も「教えることで自分の理解が深まった」と好評でした。その結果、サークルの雰囲気が大きく改善し、翌年の新入部員は前年の15名から**28名に増加（87%増）**し、過去5年で最高を記録しました。 **[企業での活かし方]** 貴社においても、部署間の利害調整やプロジェクトメンバーの協力が必要な場面で、この「相手のメリットを明確にし、Win-Winの関係を築きながら協力を引き出す力」を活かし、チーム全体で成果を出すことに貢献したいと考えています。",
            "サークル運営パターン (チームワーク)": "私の強みは、対立を解消し、多様なメンバーを共通目標に導く「調整力」です。 **[状況]** 学園祭の模擬店運営チーム（メンバー10名）で、役割分担について意見が対立し、準備が停滞していました。 **[課題]** 販売担当を希望する人が多い一方、調理担当を誰も引き受けず、「販売の方が楽しい」vs「調理も重要」で対立が激化。メンバーの間に溝ができ、準備会議にすら来ない人が出始めました。私はリーダーとして「チームを一つにまとめ、学園祭を成功させる」ことを決意しました。 **[行動]** 以下の5つのステップで対立を解消しました。 1. **個別ヒアリング**：対立する双方のメンバー10名全員に個別で話を聞き、「なぜその役割を希望するのか」「何に不満があるのか」を丁寧に把握しました 2. **共通目標の再設定**：全体ミーティングで「売上目標30万円達成」という共通のゴールを再確認し、「そのためには全員の協力が不可欠」であることを強調しました 3. **役割の価値の可視化**：「調理がなければ販売できない」「会計がなければ回らない」と、全ての役割が等しく重要であることを、過去の成功事例を交えて説明しました 4. **Win-Winの提案**：「調理担当は午前のみ、午後は販売も経験できる」というローテーション制を提案し、双方の希望を取り入れました 5. **継続的なフォロー**：週1回の振り返りミーティングで進捗を共有し、小さな成功を全員で喜び合うことで、チームの一体感を醸成しました **[結果]** メンバーの出席率が100%に回復し、準備が順調に進みました。当日は全員が主体的に動き、売上**35万円（前年比40%増）**で過去最高を記録。学園祭実行委員会から**優秀賞**を受賞し、メンバーからは「最初は不安だったけど、やって良かった」という声が多数上がりました。 **[企業での活かし方]** 貴社においても、プロジェクトチーム内で意見対立や役割分担の課題が生じた際、この「対立の背景を理解し、共通目標に導きながら全員が納得できる解決策を見出す調整力」を活かし、チーム全体で成果を出すことに貢献したいと考えています",
            "研究プレッシャー対処パターン (ストレスコントロール力)": "私の強みは、困難な状況でも感情をコントロールし、冷静に対処する「ストレスコントロール力」です。 **[状況]** 卒業研究で「新素材の物性評価」という難解なテーマに取り組みましたが、3ヶ月間、50回以上実験を繰り返しても、期待する結果が全く得られませんでした。 **[課題]** 提出期限まで残り2ヶ月という状況で、このままでは研究が完成しないという強いプレッシャーを感じていました。しかし、諦めるわけにはいかず、「必ず原因を突き止める」と決意しました。 **[行動]** 以下の5つのステップで、体系的に問題を追求しました。 1. **冷静な現状分析**：感情的にならず、まず「なぜ結果が出ないのか」を冷静に分析するため、実験データを全て可視化しました 2. **仮説の再構築**：先行研究を読み直し、自分の仮説に誤りがないか、複数の視点から検証しました 3. **条件の体系的検証**：実験条件（温度、圧力、時間など）を一つひとつ変えながら、どの条件が結果に影響するかを地道に検証しました 4. **客観的視点の獲得**：研究室の仲間や教授に定期的に相談し、自分だけでは気づけない視点を取り入れました。また、適度な休息を取ることで、思考の偏りを防ぎました 5. **執念の再実験**：ついに、温度設定に**0.5度のズレ**があることを発見。この微細なミスを修正し、追加実験を20回実施しました **[結果]** ついに期待通りの実験結果を得ることに成功し、研究を完成させました。論文は学内発表会で**優秀ポスター賞**を受賞し、指導教授からは「諦めない姿勢が素晴らしい」と評価されました。この経験から、困難に直面しても体系的に分析を続ければ、必ず突破口が見つかることを学びました。 **[企業での活かし方]** 貴社においても、すぐに結果が出ないプロジェクトや、原因不明のトラブルに直面した際、この「諦めず、体系的に課題を分析し続ける粘り強さ」を活かし、確実に成果を出すことに貢献したいと考えています。",
            },
        checklist: ["強みを一つに絞れた", "強みとエピソードに一貫性がある", "入社後の貢献イメージを明確にした"],
        prompt_focus: "【自己PRへのフィードバック依頼】\n[質問: あなたの自己PRを教えてください]\n\n以下の私の回答に対して、強みの具体性、説得力、そしてそれが応募企業の業務でどのように活かせるかの結びつきについて、面接官視点でのフィードバックをください。",
        audio_source: "day3_guidance.mp3",
    },
    4: {
        title: "#4日目# 志望動機を教えてください",
        description: "企業の理念、事業、職種への理解度と熱意を測る質問。なぜ「この会社」なのかを明確に。",
        points: ["競合他社ではなく、なぜこの会社なのかを明確にする。", "企業のミッションやバリューに共感する点を具体的に述べる。", "入社後に自分がどう貢献できるか、キャリアプランと結びつける。"],
        example_simple: "貴社の「〇〇を通じて社会に貢献する」という理念に強く共感し、私の△△というスキルを活かして貢献したいと考えております。",
        example_detailed: {
            'IT系企業・技術力・製品・サービスへの興味・関心パターン': "私が貴社を志望する理由は、圧倒的な技術力と、常に新しい価値創造に挑戦し続ける企業文化に強く共感したからです。自身が大学でAIアルゴリズムの研究に携わり、複数のプロジェクトで主体的に学び続けてきた経験から、変化の激しいIT業界でも粘り強く新しい課題に取り組む力には自信があります。特に貴社の△△部門が展開する「●●●●プロジェクト」に大きな魅力を感じています。大学時代、地域課題解決のアプリ開発を主導し、ユーザーとの対話から仕様調整まで一貫して自ら課題抽出・解決を行いました。この経験を活かし、貴社の最前線で新たなイノベーション創出に積極的に貢献したいと考えています。貴社が掲げる「□□□」という価値観のもと、AIなど最先端技術の社会実装を通じ、今までにない体験と社会的価値を提供できる人材を目指します。",
            '企業文化への共感パターン': "私が貴社を志望した理由は、「お客様の期待を超える感動を提供し続ける」という経営理念と、現場スタッフ同士が支え合い、挑戦を後押しする温かな企業文化に深く共感したからです。大学時代、飲食店のアルバイトでお客様一人ひとりに合わせた細やかなサービスを意識し、「また来たい」と言っていただけたことにやりがいを感じてきました。その中で感じたのは、スタッフ間で積極的にアイデアを出し合い、より良い接客や新しい取り組みをすぐに形にできる風通しの良さがサービス品質の向上につながる、ということです。貴社は、社員同士が自由闊達に意見を発信し、失敗を恐れず新たなサービスに挑戦できる社風を大切にされていると伺い、自分もその一員となって挑戦し続けたい、という思いが強くなりました。入社後は、これまで培ってきたホスピタリティや提案力を活かし、チームと協力しながら新しいサービス企画や現場改善に取り組み、お客様と会社双方に価値を与えられる存在を目指します。",
            '大学で学んだことを生かしていきたいパターン': "私は大学時代、地域活性化プロジェクトに積極的に関わり、地元商店街のイベント企画や地場産業のPR活動に携わってきました。その中で、地域の魅力を正確にかつ効果的に外部へ発信することが地域活性化に欠かせない要素であると強く感じました。貴行は地元企業や自治体と連携しながら、地域の新しい価値や取り組みを積極的に情報発信し、地域経済の活性化に貢献している点に共感しています。また、地域に根ざした実務の中で、情報発信に関わる多様な業務に携われる環境があることを、インターンや説明会で知り、大変魅力を感じました。私自身の経験やコミュニケーション能力を活かし、地域の特色や魅力を的確に伝えることで、地域の皆様や企業と信頼関係を築き、地域活性化の情報発信に寄与したいと考えています。将来的には、地域の魅力を全国や海外に向けて広く発信し、新たな交流やビジネス創出を促す役割を果たせる人材を目指します。"
        },
        checklist: ["「なぜこの会社か」を明確にできた", "企業研究の結果を示せた", "入社後のビジョンを語れた"],
        prompt_focus: "【志望動機へのフィードバック依頼】\n[質問: 志望動機をお聞かせください]\n\n以下の私の回答に対して、論理の一貫性、熱意の伝わりやすさ、そして回答が競合他社でも通用する内容になっていないか(独自性があるか)を確認してください。",
        audio_source: "day4_guidance.mp3",
    },
    5: {
        title: "#5日目# 入社後に活かせるスキルや経験は何ですか?",
        description: "具体的な貢献度をイメージさせるための質問。職種に直結する専門性と、汎用性の高いポータブルスキルを分けて説明する。",
        points: ["応募職種の業務内容を理解した上で、最も関連性の高いスキルを挙げる。", "「スキル」だけでなく、それを活かした「経験」と「成果」をセットで話す。", "専門スキルがない場合は、学習意欲や汎用スキル(コミュニケーション、PCスキルなど)を強調する。"],
        example_simple: "接客のアルバイトで培った顧客とのコミュニケーション能力と、ゼミで学んでいるデータ分析のスキルを活かせると考えています。",
         example_detailed: {
            '専門スキル(ITなど)パターン': "前職のシステム開発において、特にデータベース設計の経験が豊富です。貴社の新プロジェクトにおける△△の業務において、この設計スキルを活かし、初期段階から貢献できると確信しています。",
            '対人スキル(営業・接客)パターン': "お客様の潜在的なニーズを引き出すヒアリング力です。前職の営業職では、このヒアリング力を活かし、お客様一人ひとりに最適な提案を行うことで、平均売上の15%向上を達成しました。",
            '汎用スキル(PC・言語)パターン': "高いレベルのPCスキルと、英語でのコミュニケーション能力です。特にExcelやPowerPointを駆使した資料作成や分析作業は、効率よく行える自信があり、海外支社とのやり取りにも貢献できます。"
        },
        checklist: ["応募職種に必要なスキルを挙げた", "スキルを裏付ける具体的なエピソードがある", "入社後の貢献イメージが具体的である"],
        prompt_focus: "【活かせるスキルへのフィードバック依頼】\n[質問: 入社後に活かせるスキルや経験は何ですか?]\n\n以下の私の回答に対して、応募職種の必須要件とのマッチ度、スキルを裏付けるエピソードの具体性、そして過度に自己評価が高くないかについてフィードバックをください。",
        audio_source: "day5_guidance.mp3",
    },
    6: {
        title: "#6日目# 成功体験と失敗体験を教えてください",
        description: "成功から得た自信と、失敗から何を学びどう立ち直ったか、バランスよく人間性を伝える。",
        points: ["成功体験は「目標達成へのプロセス」を、失敗体験は「反省と改善点」を強調する。", "失敗は「大したことがない」話ではなく、しっかりと反省できる人間であることを示す。", "失敗の後に、具体的な行動変容があったかを示す。"],
        example_simple: "成功体験は目標売上の達成、失敗体験は準備不足によるプレゼン失敗です。どちらからも学びを得ました。",
        example_detailed: {
            "目標達成と計画性不足パターン": "(成功)長期インターンで、Webサイトの**顧客転換率(CVR)を2倍に改善**したことです。定量・定性データ分析に基づき、サイト構成を抜本的に見直しました。(失敗)一方、大学のゼミでプロジェクトリーダーを務めた際、**計画段階でのリスク見積もりが甘かった**ため、納期直前で大きな問題に直面しました。この失敗から、成功体験で培った**データ分析力**を活かし、以降は**初期段階で徹底したリスク評価**を必ず行うようになりました。",
            "チーム貢献とコミュニケーション不足パターン": "(成功)サークル活動で、長年の課題だった地域イベントへの参加を、**チーム全員の協力を得て**実現させたことです。関係者との複雑な交渉も、共通の目的を共有することで乗り越えました。(失敗)しかし、アルバイト先の新しいマニュアル導入時、**現場スタッフへの意図の説明が不十分**だったため、反発を受け導入に失敗しました。この失敗から、成功体験で学んだ**巻き込み力**を活かし、以降は**対話の場**を設けて、「なぜそれが必要か」という**目的を丁寧に説明**するよう徹底しています。",
            "ゼロイチ創造と思い込みパターン": "(成功)大学の研究室で、それまで誰も成功させていなかった**新しい実験手法をゼロから確立**したことです。粘り強い分析と外部の専門家への意見聴取が成功に繋がりました。(失敗)一方、サークルでイベント企画をした際、**過去の成功体験に固執**し、市場調査を怠って独断で進め、参加者が大幅に下回りました。この経験から、成功体験で学んだ**粘り強さ**は維持しつつ、**客観的なデータ**と**他者の意見**を謙虚に取り入れる重要性を学びました。",
            "数値結果と初期対応の遅れパターン": "(成功)飲食店アルバイトで、オペレーションを改善し、**提供時間を平均2分短縮**させたことです。全プロセスの無駄を排除し、数値目標を達成しました。(失敗)しかし、研究活動において、実験データの**初期段階での小さな異常を見過ごしてしまった**ことで、問題が深刻化し、研究を数週間巻き戻す失敗をしました。成功体験で培った**細部へのこだわり**を活かし、以降は問題の大小にかかわらず、**兆候を見つけた時点で直ちに原因を究明する**という初期対応の重要性を痛感しています。",
            "困難克服と優先順位付けの失敗パターン": "(成功)海外ボランティア活動中に、言葉の壁や文化の違いからコミュニケーションが取れないという困難を、**非言語コミュニケーションと現地の言語学習で克服**し、目標を達成できました。この経験で**適応力**が強みとなりました。(失敗)一方、長期インターンで複数のプロジェクトを担当した際、**タスクの優先順位付けを誤り、最も重要な納期の遅延を招いた**ことです。この失敗から、成功体験で学んだ**適応力**を活かし、**緊急度よりも重要度**を重視したタスク管理のフレームワークを導入し、改善を図っています。"
        },
        checklist: ["成功と失敗の両方を具体的に語れた", "失敗を他人のせいにしなかった", "失敗から得た教訓を仕事に結びつけた"],
        prompt_focus: "【成功・失敗体験へのフィードバック依頼】\n[質問: 成功体験と失敗体験を教えてください]\n\n以下の私の回答に対して、成功体験の再現性、失敗体験からの学びの深さ、そして両者のバランスが取れているかについてフィードバックをください。",
        audio_source: "day6_guidance.mp3",
    },
    7: {
        title: "#7日目# あなたが他者を巻き込んで何かを成し遂げた経験を話してください",
        description: "チームワーク、影響力、リーダーシップを測る質問。協調性と目標達成意欲をアピールする。",
        points: ["目標達成のために、チームメンバーにどう働きかけたかを具体的に説明する。", "自分の役割だけでなく、他者の貢献を認識していることを示す。", "意見が対立した際に、どのように合意形成を図ったかを説明する。"],
        example_simple: "サークルのイベントで、メンバーの協力を得て企画を成功させました。特に、困難な場面でメンバーの士気を高める役割を担いました。",
         example_detailed: {
            "合意形成型パターン": "(エピソード)アルバイト先で新メニュー開発に携わった際、意見の異なる他部署のメンバーを巻き込む必要がありました。私は定期的な合同会議を設定し、共通の顧客利益という目標を再確認することで、建設的な議論を促し、最終的に新メニューを大ヒットさせました。",
            "士気向上・貢献型パターン": "(エピソード)大学のゼミでチーム研究を行った際、テーマの難易度が高く、メンバーのモチベーションが低下していました。私はまず、**メンバー一人ひとりの得意分野と興味**をヒアリング。その強みを最大限に活かせる役割に再配置し、小さな成功を共有する場を設けて**達成感を積み重ね**ました。その結果、チームの士気が回復し、研究を**学会発表**まで漕ぎ着けることができました。",
            "利害調整・橋渡し型パターン": "(エピソード)地域ボランティア活動の企画・運営において、若手とベテランの間で活動方針に関する**意見の対立**が生じました。私は一方的な判断をせず、双方の意見を丁寧に聞き、ベテランの**「経験に基づく慎重さ」**と若手の**「新しい手法への意欲」**を対立ではなく、**リスクヘッジと革新**という形で統合するハイブリッドな計画を提案。これにより、全員が納得する形でプロジェクトを前進させることができました。",
            "新規ルール浸透・改革型パターン": "(エピソード)カフェでのアルバイトで、新人研修後の定着率が低いという課題に直面しました。私は、「マニュアルの複雑さ」が原因だと特定し、店長に働きかけ、**現場主導の新人サポート制度**の導入を提案。経験豊富なアルバイト(先輩)たちを「メンター」として巻き込み、OJT(オンザジョブトレーニング)を仕組み化しました。結果、新人の不安が解消され、研修後の**定着率を半年で20%改善**させることができました。",
            "目標共有・全体最適型パターン": "(エピソード)テニスサークルの部長として、練習参加率の低下という課題に直面しました。私はまず、サークル全体で**「〇〇大会優勝」という具体的な目標**を掲げ、メンバー全員との面談を通じて**目標に対するコミットメント**を引き出しました。そして、目標達成のために必要な個人レベルの成長プランを共有することで、**『自分の練習がチームに貢献する』**という意識を浸透させ、サークル全体を巻き込み、練習参加率と実力向上を両立させました。"
        },
        checklist: ["巻き込みの目標を明確にした", "具体的な働きかけを説明できた", "チームでの成果を自分の貢献と分けて説明できた"],
        prompt_focus: "【他者巻き込み経験へのフィードバック依頼】\n[質問: 他者を巻き込んで何かを成し遂げた経験を話してください]\n\n以下の私の回答に対して、リーダーシップの形(指示型か支援型か)、そしてメンバーを納得させた説得力についてフィードバックをください。",
        audio_source: "day7_guidance.mp3",
    },
    8: {
        title: "#8日目# ストレスはどのように解消しますか?",
        description: "ストレス耐性、自己管理能力、そしてメンタルヘルスの重要性を理解しているかを測る。ネガティブな印象を与えないよう注意。",
        points: ["ストレスの「原因」ではなく、「解消法」と「再発防止策」に焦点を当てる。", "解消法は健康的で建設的なものを挙げる。", "ストレスを溜め込む前に、いかに自己認識し対処できるかを示す。"],
        example_simple: "運動や趣味に時間を費やすことでストレスを解消します。特に、仕事に集中できるよう、週末には必ずリフレッシュする時間を設けています。",
        example_detailed: {
            'リフレッシュ型パターン': "(解消法)ジョギングや読書でリフレッシュします。特にジョギングは、頭の中を整理し、仕事の課題を客観的に見つめ直す時間になっています。",
            '自己管理型パターン': "(自己管理)ストレスを感じ始めたら、すぐに信頼できる同僚や上司に相談し、一人で抱え込まないよう心がけています。"
        },
        checklist: ["解消法が健康的で建設的である", "ストレスを自己認識できていることを示せた", "仕事に支障をきたさないことを示唆できた"],
        prompt_focus: "【ストレス解消法へのフィードバック依頼】\n[質問: ストレスはどのように解消しますか?]\n\n以下の私の回答に対して、解消法が仕事の継続性に影響を与えないか、また、自己管理能力が伝わる内容になっているかについてフィードバックをください。",
        audio_source: "day8_guidance.mp3",
    },
    9: {
        title: "#9日目# あなたの強みと弱みを改めて教えてください",
        description: "自己分析の深さと客観性を測る。弱みは仕事に致命的でないものを選び、改善努力をセットで話す。",
        points: ["強みと弱みのバランスを取る(表裏一体である必要はない)。", "弱みは必ず「改善への取り組み」とセットで話す。", "応募職種にとって致命的となる弱み(例:エンジニアなのに論理的思考が苦手)は避ける。"],
        example_simple: "強みは行動力、弱みは慎重さに欠ける点です。弱みは意識してチェックリストを使うことで改善しています。",
        example_detailed: {
                '協調性／自己主張が苦手': [
                    '私の強みは，周囲の意見を尊重し、チームの協調性を高めることができる点です.学生時代のグループワークでは、メンバーの意見を丁寧に聞き、議論を円滑に進める役割を担っていました.一方、弱みは、自分の意見を主張するのが苦手な点です.現在は、意見交換の場で、事前に自分の考えを整理し、簡潔に伝える練習をすることで、積極的に発言できるよう努力しています.'
                ],
                '課題解決力／視野が狭い': [
                    '私の強みは、課題解決のための情報収集力と分析力です.大学の研究で、難解なデータ分析に直面した際、複数の文献を読み解き、教授や専門家に相談することで、最適な分析手法を見つけ出すことができました.結果として、研究の精度を高め、新たな知見を発見することができました.一方で、弱みは、物事に集中しすぎてしまい、視野が狭くなる点です.現在は、定期的に全体像を俯瞰する時間を設けることで、この弱みを克服しようと努めています.'
                ],
                '主体性／先走りすぎる': [
                    '私の強みは、指示を待つのではなく、自ら課題を見つて行動できる主体性と行動力です.アルバイト先の飲食店で、非効率な作業フローを見つけ、改善策を提案・実行した結果、業務効率が20%向上しました.一方、弱みは、時々先走りすぎてしまい、周囲との連携が不足してしまう点です.現在は、大きな決断をする前に必ずチームメンバーに相談し、意見を求めるように心がけています.'
                ],
                '計画性／臨機応変に対応できない': [
                    '私の強みは、計画を立てて物事を着実に進めることができる計画性です.プロジェクトの進捗を細かく管理し、常に目標を意識することで、遅延なくタスクを完了させることができます.一方で、弱みは、予期せぬトラブルに直面した際、臨機応変に対応するのが苦手な点です.この弱みを克服するため、日頃から想定外の事態に備え、複数の対応策を考えておくよう意識しています.'
                ],
                '粘り強さ／完璧主義': [
                        '私の長所は、一度決めた目標に向かって粘り強く努力できる点です.大学時代、研究で困難に直面した際も，諦めずに図書館に通い、教授や先輩にも積極的に相談することで、最終的に納得のいく成果を出すことができました.一方、短所は、完璧を求めすぎてしまい、時間配分がうまくいかなくなる点です.この短所を克服するため、常にタスクの優先順位を明確にし、計画的に仕事を進めるように心がけています.'
                    ],
                    '探究心／視野が狭い': [
                        '私の長所は、一つの物事を深く掘り下げて探求できる点です.興味を持ったことにはとことん向き合い、納得できるまで調べ尽くします.一方で、短所は、物事に集中しすぎてしまい、周囲の状況や全体の流れが見えなくなる点です.この短所を克服するため、定期的にチームメンバーと進捗を共有したり、広い視野で物事を見るよう意識的に心がけています.'
                    ],
                    '好奇心旺盛／飽きっぽい': [
                        '私の長所は、新しいことへの好奇心が強く、積極的に挑戦できる点です.未知の分野でも臆することなく飛び込み、学ぶことを楽しめます.一方、短所は、様々なことに興味を持つあまり、一つのことを継続するのが苦手な点です.この短所を克服するため，目標を細かく設定し，達成するごとに小さな成功体験を積み重ねることで、継続する力を養うように努力しています.'
                    ]
            },
        checklist: ["強みと弱みに一貫性があるか確認した", "弱みの改善策を具体的に述べた", "弱みが仕事に致命的ではないことを示した"],
        prompt_focus: "【強みと弱みへのフィードバック依頼】\n[質問: あなたの強みと弱みを改めて教えてください]\n\n以下の私の回答に対して、弱みが仕事に致命的でないか、そして弱みの改善策が現実的で具体的な行動を伴っているかについてフィードバックをください。",
        audio_source: "day9_guidance.mp3",
    },
    10: {
        title: "#10日目# 入社後のキャリアプランを教えてください",
        description: "入社意欲の高さと、企業の事業への理解度を測る。企業のビジョンと自分の成長が一致していることを示す。",
        points: ["短期(1~3年)、中期(5年)、長期(10年)といった具体的な期間で区切って話す。", "企業の具体的な部署名やプロジェクト名を挙げ、具体的な役割をイメージさせる。", "単なる昇進ではなく、「どう成長して会社にどう貢献するか」に焦点を当てる。"],
        example_simple: "まずは現場で経験を積み、5年後にはチームをリードできる人材になりたいです。10年後には会社の中心となって事業を推進したいです。",
         example_detailed: {
            '営業系': [
                '入社後は、まず営業職としてお客様と直接向き合い、製品の魅力を深く理解したいと考えております.将来的には、お客様の声を活かした新サービスの企画に携わることで，事業拡大に貢献したいです.具体的には、入社後3年間でトップセールスとなり、その経験を活かして、5年後には新たな顧客層を開拓するためのマーケティング戦略を立案したいと考えております.'
            ],
            'ITエンジニア系': [
                '入社後は、まず開発者として貴社の技術スタックに習熟し、早期にチームの一員として貢献したいと考えております.将来的には、プロジェクトリーレダーとして、技術選定からチームマネジメントまで幅広く携わり、より良い開発体制を構築したいです.具体的には，3年後には新サービスの開発を主導し，5年後にはチーム全体の生産性を向上させるためのCI/CDパイプラインの導入を提案したいと考えております.'
            ],
            '流通・販売サービス系': [
                '入社後は、現場の最前線で接客の経験を積み、お客様のニーズを肌で感じたいと考えております.将来的には、店舗運営の責任者として、売上向上だけでなく、スタッフが働きやすい環境づくりにも貢献したいです.具体的には，3年後には店舗のマネジメントを任され，5年後には複数の店舗を統括するエリアマネージャーとなり、全店舗のサービス品質向上に貢献したいです.'
            ],
            '物流系': [
                '入社後は、現場での業務を通じて物流の流れ全体を理解し、効率化の課題を見つけたいです.将来的には、データ分析スキルを活かして物流システム全体の最適化を提案し、コスト削減に貢献したいです.具体的には，5年後までに物流システムの改善提案を3件以上実施し，10年後には自社開発の物流管理システムを導入することで、業界全体のスタンダードとなるような効率化モデルを構築したいです.'
            ],
            'コンサル系': [
                '入社後は、まずはアシスタントとして様々な業界のプロジェクトに携わり、課題解決の基礎を学びたいです.将来的には、特定の専門分野を確立し、クライアントから信頼されるパートナーとして，事業成長を支援したいです.具体的には，入社後3年でIT分野の専門性を高め，5年後にはプロジェクトマネージャーとして、クライアントのDX推進を成功に導きたいと考えております.'
            ],
            '人材系': [
                '入社後は、キャリアアドバイザーとして求職者の方一人ひとりに寄り添い、最適なキャリアを提案したいです.将来的には、企業の採用戦略コンサルティングにも携わり、より良い人材と企業とのマッチングを実現したいです.'
                ],
            '事務系': [
                '入社後は、まず事務職として業務の効率化に貢献したいと考えております.将来的には、部署全体の業務プロセスを改善するプロジェクトに参画し、社員がより創造的な仕事に集中できる環境を整えたいです.具体的には，入社後3年でRPAなどの自動化ツールを導入し，業務時間を20%削減することを目指します.その後，5年後には全社的な業務改善プロジェクトを主導し、働きやすいオフィス環境の構築に貢献したいです.'
            ]
        },
        checklist: ["具体的な期間で区切って話した", "企業のビジョンと合致しているか確認した", "「貢献」を軸に話した"],
        prompt_focus: "【キャリアプランへのフィードバック依頼】\n[質問: 入社後のキャリアプランを教えてください]\n\n以下の私の回答に対して、プランが現実的か、また、単なる「出世欲」ではなく「貢献意欲」が伝わるかについてフィードバックをください。",
        audio_source: "day10_guidance.mp3",
    },
    11: {
        title: "#11日目# 今までで一番達成感を感じたことは何ですか?",
        description: "モチベーションの源泉、目標達成までの道のり、そして成果を出すための行動特性を測る。成功体験(Day 6)と異なり、感情的な側面も深く問われる。",
        points: ["達成感の裏側にある「困難」や「努力」を具体的に述べる。", "個人的な感情だけでなく、その経験から得た教訓やスキルを仕事にどう活かせるか結びつける。", "仕事や学業に直結しないエピソードでも、そのプロセスが論理的であれば問題ない。"],
        example_simple: "アルバイトで新企画を成功させたときです。目標を達成するためにチーム一丸となって努力し、大きな達成感を得ました。",
       example_detailed: {
            "目標達成型パターン": "大学受験での第一志望合格です。模試の結果が振るわなかった際も、単に勉強時間を増やすだけでなく、苦手分野の徹底分析と効率的な学習計画に切り替えました。結果、合格を勝ち取り、目標達成のために冷静に戦略を練る重要性を学びました。",
            "チーム貢献型パターン": "サークル活動で、長年の課題だった地域イベントへの参加を実現させたことです。関係者との交渉、メンバーの意見調整など多くの困難がありましたが、チーム全員が役割を全うし、イベントを成功させた時の達成感は忘れられません。",
            "困難克服型パターン": "海外ボランティア活動中に、言葉の壁や文化の違いからコミュニケーションが取れず、孤立した経験です。私は諦めず、非言語コミュニケーションや現地の言語を熱心に学び、最終的に現地の方々との信頼関係を構築し、目標を達成できました。",
            "数値結果改善型パターン": "長期インターンで任されたWebサイトの**顧客転換率(CVR)を2倍に改善**したことです。既存の施策では限界があると感じ、自らユーザーインタビューを企画・実施。定量データと定性データの両方に基づき、サイト構成を一から見直しました。自分の分析と提案が、明確な数値となって現れた瞬間に、大きな達成感を覚えました。",
            "ゼロイチ創造型パターン": "大学の研究室で、それまで誰も成功させていなかった**新しい実験手法をゼロから確立**したことです。試行錯誤の連続で、何度も失敗し研究の継続が危ぶまれましたが、過去の失敗データを徹底的に分析し、指導教員だけでなく外部専門家にも意見を求めて打開策を見つけました。その手法で最初の成功データが出たとき、困難を乗り越えた最高の達成感がありました。"
        },
        checklist: ["達成感の根拠となる努力を具体的に語った", "プロセスから得られた教訓を明確にした", "話に熱意が込められていたか確認した"],
        prompt_focus: "【達成感の経験へのフィードバック依頼】\n[質問: 今までで一番達成感を感じたことは何ですか?]\n\n以下の私の回答に対して、感情的な達成感だけでなく、その経験が私の仕事への取り組み方や問題解決能力を証明しているかについてフィードバックをください。",
        audio_source: "day11_guidance.mp3",
    },
    12: {
        title: "#12日目# 最近気になるニュースや社会問題はありますか?",
        description: "社会への関心度、論理的思考力、そしてそのニュースと企業・業界との関連性を測る。",
        points: ["応募企業や業界に関連性の高いニュースを選ぶと良い。", "単にニュースを説明するだけでなく、「それに対する自分の意見」と「会社としてどう対応すべきか」を述べる。", "政治や宗教など、センシティブなテーマは避けるのが無難。"],
        example_simple: "〇〇業界におけるAI技術の進化に注目しています。貴社の事業にも大きな影響があると見ています。",
        example_detailed: {
            '社会情勢・提言型パターン': "(ニュース)最近の円安・物価高騰が気になっています。(意見)これは消費者の購買力を低下させるだけでなく、企業活動における原材料費の高騰を招いています。(会社との関連)貴社のようなグローバル企業にとっては、生産拠点の分散や、コスト削減のための業務効率化が喫緊の課題になると考えます。私は〇〇のスキルでその効率化に貢献したいです。"
        },
        checklist: ["ニュースの内容を正しく理解しているか確認した", "自分の意見を明確に述べた", "応募企業との関連性を示せた"],
        prompt_focus: "【ニュースへの意見へのフィードバック依頼】\n[質問: 最近気になるニュースや社会問題はありますか?]\n\n以下の私の回答に対して、ニュースの分析の深さ、自分の意見の論理性、そして回答が単なる情報提供で終わっていないか(意見や提言があるか)についてフィードバックをください。",
        audio_source: "day12_guidance.mp3",
    },
     13: {
            title: '#13日目# 逆質問はありますか？',
            description: '逆質問は、入社意欲や企業への理解度をアピールする最後のチャンスです.複数のパターンを参考に、あなたらしい質問を準備しましょう。',
            points: ['3つ以上は準備する', '企業のHPや採用情報を調べれば分かる質問は避ける', '入社後の働き方やキャリアに関する質問がベター'],
            example_simple: '一般的な質問：\n1. 入社後、早期に貢献するために、今のうちから学んでおくべきことはありますか？\n2. 貴社で活躍されている方の共通点や、仕事への向き合い方について教えていただけますか？\n3. 〇〇様が仕事でやりがいを感じるのはどのような時ですか？',
            example_detailed: {
                '営業系': [
                    '貴社で営業として働く上で、最も重要となるスキルは何だとお考えですか？',
                    '営業目標はどのように設定され、その達成に向てどのようなサポート体制がありますか？',
                    '貴社のお客様は、どのような課題を抱えていらっしゃるケースが多いですか？'
                ],
                'ITエンジニア系': [
                    '貴社の開発体制や、プロジェクトの進め方について詳しく教えていただけますか？',
                    '新しい技術の導入は、どのように決定されていますか？また、社員が新しい技術を学ぶ機会はありますか？',
                    '開発チーム内のコミュニケーションは、どのようなツールや方法で行われていますか？'
                ],
                '流通・販売サービス系': [
                    'お客様からのフィードバックは、どのようにサービス改善に活かされていますか？',
                    '貴社が提供するサービスの中で、特に力を入れているポイントは何ですか？',
                    'お客様に「また来たい」と思っていただけるよう、どのような接客を心がけていますか？'
                ],
                '物流系': [
                    '貴社の物流オペレーションにおいて、特に効率化を図っている点や、今後改善していきたいと考えている点は何ですか？',
                    '入社後、私が物流の専門知識を深めるための、具体的な研修や資格取得支援制度はありますか？',
                    '貴社のサプライチェーン全体の連携はどのように行われており、その中で新入社員としてどのように貢献できますか？'
                ],
                'コンサル系': [
                    '貴社が最も得意とするコンサルティング領域は何ですか？また、その中で今後の成長が期待される分野は何だとお考えですか？',
                    'コンサルタントとして、入社後の具体的なスキルアップやキャリアパスはどのように描くことができますか？',
                    'クライアントの課題解決において、チーム内でどのような議論や意思決定プロセスを経て、最終的な提案に至るのでしょうか？'
                ],
                '人材系': [
                    '入社後は、キャリアアドバイザーとして求職者の方一人ひとりに寄り添い、最適なキャリアを提案したいです.将来的には、企業の採用戦略コンサルティングにも携わり、より良い人材と企業とのマッチングを実現したいです.'
                ],
            },
            checklist: [
                '逆質問を3つ以上準備したか',
                '企業のことを深く調べていることが伝わる質問か確認した'
            ],
            prompt_focus: '以下に、面接の質問に対する私の回答を記載します.より面接官に響くように改善点を具体的に教えてください。\n\n**フィードバックのポイント**：\n・質問の意図が明確で、入社への熱意が伝わるか\n・企業のホームページや採用情報を見れば分かるような質問を避けているか\n・面接官への尊敬や、対話を通じて学びたいという姿勢が感じられるか\n\n**質問**：',
            audio_source: 'day13_guidance.mp3'
        },
    14: {
        title: "#14日目# あなたの座右の銘を教えてください",
        description: "あなたの価値観や行動原則を測る質問。座右の銘だけでなく、それがあなたの行動にどう影響しているかを説明する。",
        points: ["座右の銘はシンプルで分かりやすいものを選ぶ。", "その言葉を選んだ理由と、具体的なエピソードを結びつける。", "企業理念や仕事への姿勢と矛盾しないかを確認する。"],
        example_simple: "「継続は力なり」です。目標に向かって毎日コツコツと努力を続けることを大切にしています。",
        example_detailed: {
            "行動原則型パターン": "(座右の銘)「為せば成る、為さねば成らぬ何事も」です。(理由)私はこの言葉を、単に精神論としてではなく、目標達成のためにはまず一歩踏み出す**行動力が不可欠**であるという行動原則として捉えています。困難な状況でも諦めずに目標を達成しようとする**挑戦**することを常に意識しています。",
            "継続力型パターン": "(座右の銘)「継続は力なり」です。(理由)私は、大きな目標を前にした時こそ、この言葉を思い出します。一見地味に見える**日々の小さな努力**や、**PDCAを回し続ける粘り強さ**が、最終的に大きな成果を生むと信じており、研究活動においてもこの姿勢を貫きました。",
            "問題解決型パターン": "(座右の銘)「本質を見極める」です。(理由)この言葉は、複雑な問題に直面したときに、**表面的な現象に惑わされず、根本原因(ボトルネック)を追求する**姿勢を私に与えてくれます。アルバイト先の売上改善においても、常にこの原則で取り組みました。",
            "チームワーク型パターン": "(座右の銘)「一期一会」です。(理由)私は、目の前の人との出会いを大切にし、**相手の意見や個性を深く理解しようと努める**ことを重視しています。特にチーム活動においては、多様な価値観を尊重し、**相互理解**を深めることで、最高のチームワークを目指します。",
            "当事者意識型パターン": "(座右の銘)「自彊不息(じきょうやまず)」です。(理由)自分から努め励み、**休まず努力し続ける**という意味です。これは、**「誰かがやるだろう」ではなく「自分が当事者として やる」**という強い責任感と、常に自己成長を怠らない向上心を持って仕事に取り組む私の姿勢を表しています。",
            "変化対応型パターン": "(座右の銘)「塞翁が馬(さいおうがうま)」です。(理由)物事の良し悪しは、その時々で決まるものではないというこの言葉から、私は**現状に一喜一憂せず、長期的な視点を持つ**ことの重要性を学びました。予期せぬ困難に直面した際でも、これを**成長の機会**と捉え、柔軟に対応するよう心がけています。",
            "プロ意識型パターン": "(座右の銘)「念ずれば花ひらく」です。(理由)この「念」は、単なる願望ではなく、**目標達成に向けた強い意志と、それを裏付ける徹底した準備・努力**を意味すると考えています。プロとして高い成果を出すためには、**準備の段階から強い覚悟**を持つことが不可欠だと信じています。",
            "成長意欲型パターン": "(座右の銘)「知行合一」です。(理由)知識(知)は、実行(行)を伴ってこそ真の価値を持つという意味です。私は**インプットとアウトプットを常に一体**として考え、学んだことはすぐに**試行し、検証する**というサイクルを回すことで、速いスピードでの自己成長を目指しています。",
            "積極性型パターン": "(座右の銘)「果断(かだん)」です。(理由)私はこの言葉を**「決断力と実行力」**を持つ姿勢として捉えています。現代のビジネスでは、**情報を収集しすぎることなく、最適なタイミングで決断**し、即座に実行に移すスピードが重要であると認識し、意識的に実践しています。",
            "感謝・謙虚型パターン": "(座右の銘)「報恩謝徳(ほうおんしゃとく)」です。(理由)受けた恩や恵みに報いることを意味します。私は、自分の成功は決して自分一人の力ではなく、**多くの人の支えや機会によるもの**だと常に感謝の念を持っています。この謙虚な姿勢が、周囲への敬意と、より良い協力関係を築く基盤となっています。"
        },
        checklist: ["座右の銘を選んだ理由を明確にできた", "具体的な行動との結びつきを説明できた", "話に深みが加わったか確認した"],
        prompt_focus: "【座右の銘へのフィードバック依頼】\n[質問: あなたの座右の銘を教えてください]\n\n以下の私の回答に対して、座右の銘が私の行動原理として納得できるか、そして仕事への姿勢としてポジティブに伝わるかについてフィードバックをください。",
        audio_source: "day14_guidance.mp3",
    },
    15: {
        title: "#15日目# 面接全体を振り返ろう",
        description: "総まとめ。プログラム全体を通じて、回答準備がどこまで進んだか、最終確認を行う。",
        points: ["自分の回答を録音・録画し、客観的に評価する。", "特に準備が不十分だと感じた質問を特定し、重点的に改善する。", "面接官役の友人や家族に模擬面接をしてもらい、フィードバックを得る。"],
        example_simple: "このプログラムを通じて、すべての質問に対する論理的な回答を作成できました。あとは本番で自然に話せるよう練習を続けます。",
        example_detailed: {
            '最終確認型パターン': "(目標)全質問に対して、自信をもって3分以内で説明できるようにする。(反省点)特に、「弱み」に関する回答が弱かったため、改善点を具体的に述べられるよう、回答をブラッシュアップします。"
        },
        checklist: ["全質問の回答を3分以内にまとめられた", "自己PRと志望動機に一貫性があるか再確認した", "想定外の質問への対応策を考えた"],
        prompt_focus: "【最終振り返りフィードバック依頼】\n[質問: このプログラムで最も準備が難しいと感じた質問はどれですか?]\n\n私の学習結果全体を想定し、この回答を補強するために、どのような質問が面接官から深掘りされる可能性が高いかについてフィードバックをください。",
        audio_source: "day15_guidance.mp3",
    },
};

// 重要度別カテゴリの区分け
const categories = {
    core: [1, 2, 3, 4, 9, 10, 13],
    key: [5, 6, 7, 11],
    good: [8, 12, 14, 15]
};

let currentDay = 0;
let currentNavTab = 'daily';
let currentCategory = 'core';

// DOMの参照
const listDaily = document.getElementById('questions-list-daily');
const listCategoryContainer = document.getElementById('list-category-container');
const listDailyContainer = document.getElementById('list-daily-container');
const categoryFilterNav = document.getElementById('category-filter-nav');

const lists = {
    core: document.getElementById('questions-list-core'),
    key: document.getElementById('questions-list-key'),
    good: document.getElementById('questions-list-good')
};

const tabDaily = document.getElementById('tab-daily');
const tabCategory = document.getElementById('tab-category');
const contentContainer = document.getElementById('content-container');
const progressBarFill = document.getElementById('progress-bar-fill');
const progressText = document.getElementById('progress-text');

let mainAudio = document.getElementById('main-audio');

const formatTime = (seconds) => {
    if (isNaN(seconds) || seconds < 0) return '0:00';
    const min = Math.floor(seconds / 60);
    const sec = Math.floor(seconds % 60);
    return `${min}:${sec < 10 ? '0' : ''}${sec}`;
};

const saveAnswer = (day, answer) => {
    appState.answers[day] = answer;
};

const getAnswer = (day) => {
    return appState.answers[day] || '';
};

const saveChecklistItem = (day, index, checked) => {
    if (!appState.checklist[day]) appState.checklist[day] = {};
    appState.checklist[day][index] = checked;
};

const getChecklistItem = (day, index) => {
    return appState.checklist[day] && appState.checklist[day][index];
};

const saveEvaluation = (day, eval) => {
    appState.evaluations[day] = eval;
};

const getEvaluation = (day) => {
    return appState.evaluations[day] || '';
};

const renderDayContent = (day) => {
    if (!mainAudio.paused) mainAudio.pause();
    mainAudio.src = '';
    
    currentDay = day;
    const data = questionsData[day];
    
    document.querySelectorAll('aside ul li').forEach(li => {
        li.classList.remove('active-day');
    });
    const activeItem = document.querySelector(`aside ul li[data-day="${day}"]`);
    if (activeItem) {
        activeItem.classList.add('active-day');
    }

    if (day === 0) {
        contentContainer.innerHTML = `
            <div class="card p-6 text-center">
                <h2 class="text-2xl font-bold text-gray-700">${data.title}</h2>
                <p class="mt-4 text-gray-600">このプログラムは、主要な面接質問に対する体系的な回答準備を15日間で完了させることを目的としています。</p>
                <p class="mt-2 text-gray-600">左側のメニューから、学習したい日(質問)を選択してください。</p>
                <p class="mt-4 text-xs text-gray-400">※「はじめに」には進捗管理やフィードバック機能はありません。</p>
            </div>
        `;
        return;
    }

    const isDetailedExampleExist = data.example_detailed && Object.keys(data.example_detailed).length > 0;
    
    let detailedExampleHTML = '';

    if (isDetailedExampleExist) {
        const keys = Object.keys(data.example_detailed);
        const options = keys.map(key => 
            `<option value="${key}">${key}</option>`
        ).join('');
        
        const initialDetailedExampleText = data.example_detailed[keys[0]];
        
        detailedExampleHTML = `
            <div class="example-detailed">
                <div class="example-title">💡 詳細な回答例</div>
                <select id="detailed-example-select" class="w-full p-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500 mb-3 bg-white">
                    ${options}
                </select>
                <p id="detailed-example-text" class="text-gray-700 whitespace-pre-wrap leading-relaxed">${initialDetailedExampleText}</p>
            </div>
        `;
    }

    contentContainer.innerHTML = `
        <div class="card">
            <h2 class="text-2xl font-bold text-indigo-600">${data.title}</h2>
            <p class="text-gray-600 mt-2">${data.description}</p>

            <div class="audio-player mt-4 p-4 border rounded-lg bg-gray-50">
                <h3 class="text-lg font-semibold mb-2 flex items-center"><i class="fas fa-volume-up mr-2 text-indigo-500"></i> 音声ガイド</h3>
                <div class="flex items-center gap-4">
                    <button id="main-play-pause" class="text-indigo-600 p-2 text-xl hover:text-indigo-800 transition"><i class="fas fa-play"></i></button>
                    <span id="main-current-time" class="text-sm w-10">0:00</span>
                    <div id="main-progress-bar-container" class="flex-grow h-2 bg-gray-300 rounded-full cursor-pointer relative">
                        <div id="main-progress-bar-fill" class="h-2 bg-indigo-500 rounded-full" style="width: 0%;"></div>
                    </div>
                    <span id="main-duration" class="text-sm w-10">0:00</span>
                    
                    <div id="main-speed-controls" class="flex gap-1 text-sm bg-white p-1 rounded-full border">
                        <button data-speed="0.8" class="main-speed-btn py-0.5 px-2 rounded-full text-gray-600 hover:bg-indigo-50 transition">0.8x</button>
                        <button data-speed="1.0" class="main-speed-btn py-0.5 px-2 rounded-full bg-indigo-100 text-indigo-600 font-bold shadow-sm transition">1.0x</button>
                        <button data-speed="1.2" class="main-speed-btn py-0.5 px-2 rounded-full text-gray-600 hover:bg-indigo-50 transition">1.2x</button>
                        <button data-speed="1.5" class="main-speed-btn py-0.5 px-2 rounded-full text-gray-600 hover:bg-indigo-50 transition">1.5x</button>
                    </div>
                </div>
            </div>

            <div class="mt-6">
                <h3 class="text-xl font-semibold mb-3 text-indigo-700">✅ 回答のポイント</h3>
                <ul class="list-disc list-inside space-y-2 ml-4 text-gray-700">
                    ${data.points.map(p => `<li>${p}</li>`).join('')}
                </ul>
            </div>

            <div class="mt-8 p-5 bg-gradient-to-r from-yellow-50 to-blue-50 rounded-xl border-2 border-yellow-300">
                <h3 class="text-xl font-semibold mb-3 text-gray-800">💡 回答例</h3>
                
                <div class="example-grid">
                    <div class="example-simple">
                        <div class="example-title">📝 簡潔な回答例</div>
                        <p class="text-gray-700 whitespace-pre-wrap leading-relaxed">${data.example_simple}</p>
                    </div>

                    ${detailedExampleHTML}
                </div>
            </div>

            <div class="mt-8 p-5 bg-indigo-50 rounded-xl border border-indigo-200">
                <h3 class="text-xl font-semibold mb-3 text-indigo-700">📝 あなたの回答</h3>
                <textarea id="user-answer" rows="6" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="あなたの回答を入力してください..."></textarea>
                
                <button id="generate-prompt" class="mt-3 w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150 shadow-md">
                    AIにフィードバックをもらうプロンプトを生成
                </button>
                
                <div id="prompt-output" class="mt-4 hidden">
                    <textarea id="generated-prompt-text" rows="8" class="w-full p-3 border border-dashed border-indigo-400 rounded-lg bg-indigo-100 text-sm" readonly></textarea>
                    <button id="copy-prompt" class="mt-2 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150">
                        <i class="fas fa-copy mr-2"></i> 生成したプロンプトをコピー
                    </button>
                </div>
            </div>

            <div class="mt-8 p-5 bg-blue-50 rounded-xl border border-blue-200">
                <h3 class="text-xl font-semibold mb-3 text-blue-700">📋 今日の振り返り</h3>
                <ul id="checklist" class="space-y-3">
                    ${data.checklist.map((item, index) => `
                        <li class="flex items-center">
                            <input type="checkbox" id="check-${day}-${index}" class="checklist-item w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                            <label for="check-${day}-${index}" class="ml-3 text-gray-700 cursor-pointer">${item}</label>
                        </li>
                    `).join('')}
                </ul>
                
                <div class="mt-6 pt-4 border-t border-blue-200">
                    <h4 class="text-lg font-medium text-gray-700 mb-2">自己評価・メモ</h4>
                    <textarea id="self-eval-input" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="今日の学習で感じたこと、次の課題などをメモしましょう..."></textarea>
                </div>
            </div>
        </div>
    `;

    initAudioPlayer(data.audio_source);
    initDetailedExample(data.example_detailed);
    initChecklistAndPrompt(data);
};

const initAudioPlayer = (source) => {
    mainAudio.src = source;
    mainAudio.load();
    mainAudio.playbackRate = 1.0;
    
    mainAudio.onerror = () => {
        console.error('音声ファイルの読み込みに失敗しました:', source);
        const playPauseBtn = document.getElementById('main-play-pause');
        if (playPauseBtn) {
            playPauseBtn.disabled = true;
            playPauseBtn.classList.add('opacity-50', 'cursor-not-allowed');
        }
    };
    
    document.querySelectorAll('.main-speed-btn').forEach(b => {
        b.classList.remove('bg-indigo-100', 'text-indigo-600', 'font-bold', 'shadow-sm');
        b.classList.add('text-gray-600', 'hover:bg-indigo-50');
        if (b.dataset.speed === '1.0') {
            b.classList.add('bg-indigo-100', 'text-indigo-600', 'font-bold', 'shadow-sm');
            b.classList.remove('text-gray-600', 'hover:bg-indigo-50');
        }
    });

    const playPauseBtn = document.getElementById('main-play-pause');
    const currentTimeEl = document.getElementById('main-current-time');
    const durationEl = document.getElementById('main-duration');
    const progressBarContainer = document.getElementById('main-progress-bar-container');
    const progressBarFillAudio = document.getElementById('main-progress-bar-fill');
    const speedControls = document.querySelectorAll('.main-speed-btn');

    if (!playPauseBtn || !currentTimeEl || !durationEl || !progressBarContainer || !progressBarFillAudio) {
        console.error('必要なDOM要素が見つかりません');
        return;
    }

    mainAudio.onloadedmetadata = () => {
        durationEl.textContent = formatTime(mainAudio.duration);
        currentTimeEl.textContent = formatTime(mainAudio.currentTime);
    };

    mainAudio.ontimeupdate = () => {
        currentTimeEl.textContent = formatTime(mainAudio.currentTime);
        const progress = (mainAudio.currentTime / mainAudio.duration) * 100;
        progressBarFillAudio.style.width = `${progress}%`;
    };
    
    mainAudio.onended = () => {
        playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
    };

    playPauseBtn.onclick = () => {
        if (mainAudio.paused) {
            mainAudio.play().catch(err => {
                console.error('音声再生エラー:', err);
                alert('音声の再生に失敗しました');
            });
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
            mainAudio.pause();
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
    };

    progressBarContainer.onclick = (e) => {
        const rect = progressBarContainer.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const percentage = clickX / rect.width;
        mainAudio.currentTime = mainAudio.duration * percentage;
    };

    speedControls.forEach(btn => {
        btn.onclick = () => {
            const speed = parseFloat(btn.dataset.speed);
            mainAudio.playbackRate = speed;
            
            speedControls.forEach(b => {
                b.classList.remove('bg-indigo-100', 'text-indigo-600', 'font-bold', 'shadow-sm');
                b.classList.add('text-gray-600', 'hover:bg-indigo-50');
            });
            btn.classList.add('bg-indigo-100', 'text-indigo-600', 'font-bold', 'shadow-sm');
            btn.classList.remove('text-gray-600', 'hover:bg-indigo-50');
        };
    });
};

const initDetailedExample = (detailedExamples) => {
    const select = document.getElementById('detailed-example-select');
    const exampleText = document.getElementById('detailed-example-text');
    
    if (select && exampleText && detailedExamples) {
        select.onchange = (e) => {
            const key = e.target.value;
            exampleText.textContent = detailedExamples[key];
        };
    }
};

const initChecklistAndPrompt = (data) => {
    const checklistItems = document.querySelectorAll('.checklist-item');
    const generatePromptBtn = document.getElementById('generate-prompt');
    const copyPromptBtn = document.getElementById('copy-prompt');
    const userAnswerTextarea = document.getElementById('user-answer');
    const generatedPromptTextarea = document.getElementById('generated-prompt-text');
    const promptOutputDiv = document.getElementById('prompt-output');
    const selfEvalInput = document.getElementById('self-eval-input');

    if (!userAnswerTextarea || !selfEvalInput) {
        console.error('必要なテキストエリアが見つかりません');
        return;
    }

    const storedAnswer = getAnswer(currentDay);
    if (storedAnswer) userAnswerTextarea.value = storedAnswer;
    
    const storedEval = getEvaluation(currentDay);
    if (storedEval) selfEvalInput.value = storedEval;
    
    checklistItems.forEach((item, index) => {
        const isChecked = getChecklistItem(currentDay, index);
        item.checked = isChecked || false;
        item.onchange = () => {
            saveChecklistItem(currentDay, index, item.checked);
            updateProgressBar();
        };
    });

    userAnswerTextarea.oninput = () => {
        saveAnswer(currentDay, userAnswerTextarea.value);
    };
    
    selfEvalInput.oninput = () => {
        saveEvaluation(currentDay, selfEvalInput.value);
    };

    if (generatePromptBtn && generatedPromptTextarea && promptOutputDiv) {
        generatePromptBtn.onclick = () => {
            if (userAnswerTextarea.value.trim() === '') {
                alert('回答を入力してからプロンプトを生成してください。');
                return;
            }
            const prompt = `${data.prompt_focus}\n\n[質問内容]\n${data.title}\n\n[私の回答]\n${userAnswerTextarea.value.trim()}`;
            generatedPromptTextarea.value = prompt;
            promptOutputDiv.classList.remove('hidden');
        };
    }

    if (copyPromptBtn && generatedPromptTextarea) {
        copyPromptBtn.onclick = async () => {
            try {
                await navigator.clipboard.writeText(generatedPromptTextarea.value);
                alert('プロンプトがクリップボードにコピーされました!');
            } catch (err) {
                // フォールバック
                generatedPromptTextarea.select();
                document.execCommand('copy');
                alert('プロンプトがコピーされました!');
            }
        };
    }
    
    updateProgressBar();
};

const updateProgressBar = () => {
    let completedDays = 0;
    let totalItems = 0;
    let completedItems = 0;

    for (let i = 1; i <= TOTAL_DAYS; i++) {
        const data = questionsData[i];
        if (!data) continue;
        
        const dayChecklistLength = data.checklist.length;
        let isDayComplete = true;

        for (let j = 0; j < dayChecklistLength; j++) {
            totalItems++;
            if (getChecklistItem(i, j)) {
                completedItems++;
            } else {
                isDayComplete = false;
            }
        }
        if (isDayComplete && dayChecklistLength > 0) {
            completedDays++;
        }
    }

    const progress = totalItems > 0 ? (completedItems / totalItems) * 100 : 0;
    progressBarFill.style.width = `${progress.toFixed(2)}%`;
    progressText.textContent = `${completedDays}/${TOTAL_DAYS} 日完了 (${completedItems}/${totalItems} 項目)`;
};

const switchNavTab = (tabName) => {
    currentNavTab = tabName;

    if (tabName === 'daily') {
        tabDaily.classList.add('active');
        tabCategory.classList.remove('active');
        listDailyContainer.classList.remove('hidden');
        listCategoryContainer.classList.add('hidden');
        categoryFilterNav.classList.add('hidden');
    } else {
        tabDaily.classList.remove('active');
        tabCategory.classList.add('active');
        listDailyContainer.classList.add('hidden');
        listCategoryContainer.classList.remove('hidden');
        categoryFilterNav.classList.remove('hidden');
    }
    
    if (currentDay === 0 && tabName === 'category') {
        renderDayContent(categories.core[0]); 
    } else if (currentDay === 0 && tabName === 'daily') {
        renderDayContent(0);
    } else {
        renderDayContent(currentDay);
    }
};

document.querySelectorAll('#category-filter-nav .category-button').forEach(btn => {
    btn.addEventListener('click', () => {
        currentCategory = btn.dataset.category;
        if (categories[currentCategory] && categories[currentCategory].length > 0) {
            renderDayContent(categories[currentCategory][0]);
        }
    });
});

tabDaily.addEventListener('click', () => switchNavTab('daily'));
tabCategory.addEventListener('click', () => switchNavTab('category'));

[listDaily, lists.core, lists.key, lists.good].forEach(list => {
    if (!list) return;
    
    list.addEventListener('click', (e) => {
        let target = e.target;
        while(target && target.tagName !== 'LI') {
            target = target.parentElement;
        }

        if (target && target.tagName === 'LI') {
            const day = parseInt(target.dataset.day);
            if (!isNaN(day)) {
                renderDayContent(day);
            }
        }
    });
});

document.addEventListener('DOMContentLoaded', () => {
    renderQuestionsList();
    switchNavTab('daily');
    renderDayContent(0);
    updateProgressBar();
    initIntroAudioPlayer();
});

const renderQuestionsList = () => {
    if (!listDaily) return;
    
    listDaily.innerHTML = '';
    for (let i = 1; i <= TOTAL_DAYS; i++) {
        const data = questionsData[i];
        if (!data) continue;
        
        const listItem = document.createElement('li');
        listItem.textContent = data.title;
        listItem.dataset.day = i;
        listDaily.appendChild(listItem);
    }

    for (const category in lists) {
        const list = lists[category];
        if (!list) continue;
        
        list.innerHTML = '';
        categories[category].forEach(day => {
            const data = questionsData[day];
            if (!data) return;
            
            const listItem = document.createElement('li');
            listItem.textContent = data.title;
            listItem.dataset.day = day;
            list.appendChild(listItem);
        });
    }
};

const initIntroAudioPlayer = () => {
    const playIntroBtn = document.getElementById('play-intro');
    const introAudio = document.getElementById('intro-audio');
    const introSpeedControls = document.querySelectorAll('#intro-speed-controls .speed-btn');

    if (!playIntroBtn || !introAudio) {
        console.error('イントロ音声プレーヤーの要素が見つかりません');
        return;
    }

    introAudio.onerror = () => {
        console.error('イントロ音声の読み込みに失敗しました');
        playIntroBtn.disabled = true;
        playIntroBtn.classList.add('opacity-50', 'cursor-not-allowed');
    };

    playIntroBtn.addEventListener('click', () => {
        if (introAudio.paused) {
            introAudio.play().catch(err => {
                console.error('イントロ音声再生エラー:', err);
                alert('音声の再生に失敗しました');
            });
            playIntroBtn.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
            introAudio.pause();
            playIntroBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
    });
    
    introAudio.onended = () => {
        playIntroBtn.innerHTML = '<i class="fas fa-play"></i>';
    };

    introSpeedControls.forEach(btn => {
        btn.addEventListener('click', () => {
            const speed = parseFloat(btn.dataset.speed);
            introAudio.playbackRate = speed;
            
            introSpeedControls.forEach(b => {
                b.classList.remove('bg-white', 'text-indigo-600', 'font-bold', 'shadow-sm');
                b.classList.add('text-gray-600', 'hover:bg-white');
            });
            btn.classList.add('bg-white', 'text-indigo-600', 'font-bold', 'shadow-sm');
            btn.classList.remove('text-gray-600', 'hover:bg-white');
        });
    });
};
</script>
</body>
</html>